using MySqlX.XDevAPI.CRUD;
using SoftUniSpaceConsoleWebApp.Data.Entities;
using SoftUniSpaceConsoleWebApp.Models.Crew;
using SoftUniSpaceConsoleWebApp.Repositories.Interfaces;
using SoftUniSpaceConsoleWebApp.Services.Interfaces;
using System.Net.Http.Headers;

namespace SoftUniSpaceConsoleWebApp.Services
{
    public class CrewService : ICrewService
    {
        private readonly ICrewRepository crewRepository;
       

        public CrewService(ICrewRepository crewRepository) {

            this.crewRepository = crewRepository;
        
        
        }
        public void Add(CreateCrewViewModel Crew)
        {
            var CrewEntity = new Crew(Crew.Name, Crew.Age, Crew.Rank);

            crewRepository.Add(CrewEntity);

          //emprty
        }
        public IEnumerable<CrewViewModel> GetAll()
        {
            var CrewEntities = crewRepository.GetAll();

            var crews = CrewEntities.Select(Crew => new CrewViewModel(Crew.Id,Crew.Name,Crew.Age,Crew.Rank));

            return crews;
        }

        public void Delete(int id) 
            => crewRepository.Delete(id); //Step 2 call Repository Delete Method 

        public CrewViewModel Get(int id)
        {
            var crewid = crewRepository.Get(id);

            return new CrewViewModel(crewid); //QUICK FIX THIS 
        }



    }
}
